<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flash Recall</title>
    <link rel="stylesheet" href="style.css?v=20260202" />
    <link rel="preload" href="imgs/flash_icon.png" as="image" />
    <link rel="preload" href="imgs/tutorial_icon.png" as="image" />
  </head>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js"></script>
  <body data-state="idle" data-mode="practice" data-view="home">
    <main>
      <header>
        <div class="title-wrap">
          <div class="title-cards" aria-hidden="true">
            <span class="title-card card-a"></span>
            <span class="title-card card-b"></span>
            <span class="title-card card-c"></span>
          </div>
          <h1 class="title">Flash Recall</h1>
        </div>
      </header>
      <section class="layout">
        <aside class="panel">
          <div class="controls">
            <div class="mode-grid">
              <button id="playStart" class="mode-card primary" type="button">
                <strong>Play</strong>
              </button>
              <button id="practiceStart" class="mode-card mode-card--locked" type="button" disabled>
                <strong>Sandbox</strong>
                <span class="mode-card__lock" aria-hidden="true"></span>
              </button>
            </div>
            <div class="quick-actions">
              <button id="settingsOpen" class="quick-action icon-button" type="button" aria-label="Open settings">
                <img class="action-icon" src="imgs/settings_button.png" alt="" />
              </button>
              <button id="statsOpen" class="quick-action icon-button" type="button" aria-label="Open stats">
                <img class="action-icon" src="imgs/stat_button.png" alt="" />
              </button>
              <button id="referenceOpen" class="quick-action icon-button" type="button" aria-label="Open reference">
                <img class="action-icon" src="imgs/reference_button.png" alt="" />
              </button>
              <button id="fullscreenToggle" class="quick-action icon-button" type="button" aria-label="Toggle fullscreen">
                <img class="action-icon" src="imgs/fullscreen_button.png" alt="" />
              </button>
            </div>
          </div>
        </aside>
        <section class="stage panel">
          <div class="timer-bar" id="timerBar">
            <div class="timer-bar__fill" id="timerFill"></div>
          </div>
          <div class="stage-instructions" id="stageInstructions" aria-hidden="true"></div>
          <div class="cards" id="cardGrid"></div>
          <div class="prompts" id="promptGrid"></div>
          <div class="inputs" id="inputGrid"></div>
          <div class="platformer panel" id="platformerPanel">
            <div class="platformer-header">Platformer</div>
            <canvas id="platformerCanvas" width="900" height="160"></canvas>
          </div>
          <div class="actions"></div>
          <div class="results" id="resultsPanel"></div>
        </section>
      </section>
      <section class="stages-screen" id="stagesScreen" aria-hidden="true">
        <div class="stages-hero">
          <button id="stagesBack" class="quick-action icon-button" type="button" aria-label="Home">
            <img class="action-icon" src="imgs/home_button.png" alt="" />
          </button>
          <div class="stages-summary">
            <div class="stages-progress" id="stagesProgress" aria-live="polite"></div>
            <div class="stages-total" id="stagesTotal" aria-live="polite"></div>
          </div>
        </div>
        <div class="stage-board">
          <div class="stage-list stage-grid" id="stageList"></div>
        </div>
        <div class="stages-footer">
          <div id="stagesFooter"></div>
        </div>
      </section>
    </main>
    <div class="modal" id="practiceModal" aria-hidden="true">
      <div class="modal-card modal-card--sandbox">
        <h3>Sandbox Settings</h3>
        <div class="controls">
          <div class="control-row settings-row">
            <div class="stat-field">
              <label for="revealTime">Reveal (s)</label>
              <input id="revealTime" type="number" min="2" max="20" step="1" value="20" />
            </div>
            <div class="stat-field">
              <label for="recallTime">Recall (s)</label>
              <input id="recallTime" type="number" min="5" max="30" step="1" value="20" />
            </div>
            <div class="stat-field">
              <label for="cardCount">Cards</label>
              <input id="cardCount" type="number" min="1" max="10" step="1" value="4" />
            </div>
          </div>
          <div class="control-group">
            <div class="control-row">
              <label>Card types</label>
              <div class="control-actions">
                <button id="practiceSelectAll" class="link-button" type="button">Select all</button>
                <button id="practiceDeselectAll" class="link-button" type="button">Deselect all</button>
              </div>
            </div>
            <div class="practice-error practice-error--floating" id="practiceTypeError" aria-live="polite" hidden>
              Select at least one card type to start Sandbox.
            </div>
            <div class="checkboxes icon-choices">
              <label class="icon-choice">
                <input type="checkbox" value="numbers" />
                <span class="icon-tile">
                  <img src="imgs/icons/card-numbers.svg" alt="" />
                  <span>Numbers</span>
                </span>
              </label>
              <label class="icon-choice">
                <input type="checkbox" value="colors" />
                <span class="icon-tile">
                  <img src="imgs/icons/card-colors.svg" alt="" />
                  <span>Colors</span>
                </span>
              </label>
              <label class="icon-choice">
                <input type="checkbox" value="letters" />
                <span class="icon-tile">
                  <img src="imgs/icons/card-letters.svg" alt="" />
                  <span>Letters</span>
                </span>
              </label>
              <label class="icon-choice">
                <input type="checkbox" value="directions" />
                <span class="icon-tile">
                  <img src="imgs/icons/card-directions.svg" alt="" />
                  <span>Directions</span>
                </span>
              </label>
              <label class="icon-choice">
                <input type="checkbox" value="shapes" />
                <span class="icon-tile">
                  <img src="imgs/icons/card-shapes.svg" alt="" />
                  <span>Shapes</span>
                </span>
              </label>
            </div>
          </div>
          <div class="control-group">
            <label>Modifiers</label>
            <div class="checkboxes icon-choices">
              <label class="icon-choice">
                <input id="practiceMathOps" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-mathops.svg" alt="" />
                  <span>Math ops</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceMisleadColors" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-misleadcolors.svg" alt="" />
                  <span>Mislead</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceBackgroundColor" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-backgroundcolor.svg" alt="" />
                  <span>Background</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceSwap" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-swapcards.svg" alt="" />
                  <span>Swap</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practicePlatformer" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-platformer.svg" alt="" />
                  <span>Platformer</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceGlitch" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-glitch.svg" alt="" />
                  <span>Glitch</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceFog" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-fog.svg" alt="" />
                  <span>Fog</span>
                </span>
              </label>
              <label class="icon-choice">
                <input id="practiceAds" type="checkbox" />
                <span class="icon-tile">
                  <img src="imgs/icons/mod-ads.svg" alt="" />
                  <span>Ads</span>
                </span>
              </label>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button id="practiceCancel" class="secondary" type="button">Back</button>
          <button id="practiceConfirm" type="button">Start Sandbox</button>
        </div>
      </div>
    </div>
    <div data-include="ui/settings.html"></div>
    <div data-include="ui/stats.html"></div>
    <div data-include="ui/stage-intro.html"></div>
    <div data-include="ui/reference.html"></div>
    <div class="interrupt-modal" id="interruptModal" aria-hidden="true" hidden>
      <div class="interrupt-card">
        <div class="interrupt-header">
          <button class="interrupt-close" id="interruptClose" type="button">X</button>
        </div>
        <div class="interrupt-body">Pop-up block</div>
      </div>
    </div>
    <div class="hud-cluster" id="hudCluster">
      <div class="pill hud-timer" id="stageTimerHud">Time 0.00</div>
      <div class="pill hud-round" id="roundPill">Round 0</div>
    </div>
    <div class="pill hud-streak" id="streakPill">STREAK 0</div>
    <canvas class="fog-overlay" id="fogCanvas"></canvas>
    <div class="success-toast" id="successToast" aria-hidden="true">All correct!</div>
    <div class="config-hidden" hidden>
      <select id="modeSelect">
        <option value="practice" selected>Practice</option>
        <option value="stages">Stages</option>
      </select>
    </div>
    <script src="firebase-analytics.js?v=1"></script>
    <script>
      window.unlockAllStages = true;
      window.unlockSandbox = true;
    </script>
    <script src="ui-loader.js?v=1"></script>
  </body>
</html>
